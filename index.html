<html>
	<head>
		<title>Campi</title>
		<script>
				function sendSettings(){
					fetch(`settings.php?shutter=${shutter.value}&iso=${iso.value}&awbred=${awbred.value}&awbblue=${awbblue.value}&exposure=${exposure.value}&brightness=${brightness.value}&contrast=${contrast.value}`);
				}
				function sendCommand(){
                        fetch(`exec.php?pan=${pan.value}&tilt=${tilt.value}`)
                }
				let to = 0;
				function refreshImage(){
					clearTimeout(to);
					frame.src=`ramdisk/frame.jpg?rnd=${Math.random()}`;
					setTimeout('refreshImage()',2000);
				}
		</script>
	</head>
	<body>
		<img id='frame' src='ramdisk/frame.jpg'/>
		<div id='settings'>
			<!--<div id='setting'>
				<label>Analog Gain</label>
				<input value='1.0' id='again'/>
			</div>
			<div id='setting'>
				<label>Digital Gain</label>
				<input value='1.0' id='dgain'/>
			</div>-->
			<div id='setting'>
				<label>Pan</label>
                <button onclick='pan.value=pan.value<100?1.0*pan.value+5.0:100.0;sendCommand();'>&lt;--</button>
                <input type='text' id='pan' value='50' size='3'/>%
                <button onclick='pan.value=pan.value>0.0?1.0*pan.value-5.0:0.0;sendCommand();'>--&gt;</button>
            </div>
   			<div id='setting'>
       			<label>Tilt</label>
                <button onclick='tilt.value=tilt.value<100?1.0*tilt.value+5.0:100.0;sendCommand();'>\/</button>
                <input type='text' id='tilt' value='50' width='3'/>%
                <button onclick='tilt.value=tilt.value>0.0?1.0*tilt.value-5.0:0.0;sendCommand();'>/\</button>
            </div>
			<div id='setting'>

				<label>Exposure Mode</label>
				<select id='exposure'>
					<option value='off'>Off</option>
					<option value='auto'>Auto</option>
					<option value='night'>Night</option>
					<option value='nightpreview'>NightPreview</option>
					<option value='backlight'>Backlight</option>
					<option value='spotlight'>Spotlight</option>
					<option value='sports'>Sports</option>
					<option value='snow'>Snow</option>
					<option value='beach'>Beach</option>
					<option value='verylong'>Verylong</option>
					<option value='fixedfps'>FixedFPS</option>
					<option value='antishake'>AntiShake</option>
					<option value='fireworks'>Fireworks</option>
				</select>
			</div>
			<div id='setting'>
				<label>Shutter Time (uS)</label>
				<input value='1000' id='shutter'/>
			</div>
			<div id='setting'>
				<label>ISO</label>
				<input value='200' id='iso'/>
			</div>
			<div id='setting'>
				<label>Brightness</label>
				<input value='50' id='brightness'/>
			</div>
			<div id='setting'>
				<label>Contrast</label>
				<input value='0' id='contrast'/>
			</div>
			<div id='setting'>
				<label>AWB-Red</label>
				<input value='1.0' id='awbred'/>
			</div>
			<div id='setting'>
				<label>AWB-Blue</label>
				<input value='1.0' id='awbblue'/>
			</div>
			<div id='setting'>
				<button onClick='sendSettings()'>Save Settings</button>
			</div>
		</div>
	</body>
	<script>refreshImage();</script>
</html>




